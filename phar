#!/bin/sh
#phar Photo Archiving Script
#
#Author: 40276179

#Clear Log Files
> paths

#Reset Variables
noFiles=0

#User Argument Checks
	#Check if the correct number of arguments have been entered
	if [ $# -ne 2 ]
	then
		printf "Correct usage: # phar source destination"
		exit
	fi

	#Check if source exists
	if [ ! -d  $1 ]
	then
		printf "The source directory does not exist"
		exit
	fi
	
	#Check if destination exists
	if [ ! -d  $2 ]
	then
		printf "The archive directory does not exist"
		exit
	fi
#---

#Find every file matching specified naming criteria in source directory.
for FILE in `find $1 -name 'IMG_[0,1,2,3,4,5,6,7,8,9][0,1,2,3,4,5,6,7,8,9][0,1,2,3,4,5,6,7,8,9][0,1,2,3,4,5,6,7,8,9].JPG'`
do	noFiles=$((noFiles+1))
		#write file paths to temporary file
		echo $FILE >> paths
done

#Print the number of files found to console
if [ $noFiles -ne 0 ]
then
	printf $noFiles" files found matching specified criteria."
else
	printf "No files found matching specified criteria."
fi

#For each file found
for path in `xargs <paths`
do 	if [ -f  $2/`basename $path` ]	
		then
			printf "TEST"
		else
			cp $path $2
			printf "hmm"
		fi
done
